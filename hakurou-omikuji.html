<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ç™½ç‹¼ãŠã¿ãã˜ãƒ¡ãƒ¼ã‚«ãƒ¼</title>

  <style>
    :root{
      --accent:#e64b4b;
      --ink:#1f2a37;
      --line:#e6eff7;
    }
    *{box-sizing:border-box;}

    body{
      margin:0;
      font-family: system-ui, -apple-system, "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
      color:var(--ink);
      min-height:100vh;
      display:grid;
      place-items:center;
      padding:24px;
      transition: background 300ms ease, color 300ms ease;
      background-attachment: fixed;
      position:relative;
      overflow-x:hidden;

      /* ã‚¹ãƒãƒ›ã®èª¤çˆ†é˜²æ­¢ */
      touch-action: manipulation;
    }

    /* ==========================
       èƒŒæ™¯ãƒ†ãƒ¼ãƒ
       ========================== */

    /* â‘¡ æ¡œï¼šå‘¨å›²ã«æ¡œé£¾ã‚Š */
    body.theme-sakura{
      color: var(--ink);
      background:
        radial-gradient(1200px 700px at 10% -10%, #fff7fb 0%, transparent 60%),
        radial-gradient(900px 500px at 90% 110%, #ffeef6 0%, transparent 55%),
        linear-gradient(180deg, #fff 0%, #fff5f9 100%);
    }
    body.theme-sakura::before,
    body.theme-sakura::after{
      content:"";
      position:fixed;
      inset:-10vh -10vw;
      pointer-events:none;
      z-index:0;
      background:
        radial-gradient(90px 90px at 12% 20%, rgba(255,170,205,.55) 0 35%, transparent 36%),
        radial-gradient(120px 120px at 28% 35%, rgba(255,190,220,.50) 0 30%, transparent 31%),
        radial-gradient(110px 110px at 75% 25%, rgba(255,160,210,.50) 0 32%, transparent 33%),
        radial-gradient(140px 140px at 85% 50%, rgba(255,200,230,.45) 0 30%, transparent 31%),
        radial-gradient(90px 90px at 55% 75%, rgba(255,175,215,.45) 0 28%, transparent 29%);
      filter: blur(6px);
      opacity:.9;
    }
    body.theme-sakura::after{
      background:
        radial-gradient(8px 8px at 15% 15%, rgba(255,160,200,.9) 0 60%, transparent 61%),
        radial-gradient(10px 10px at 30% 25%, rgba(255,180,210,.9) 0 60%, transparent 61%),
        radial-gradient(8px 8px at 70% 18%, rgba(255,170,210,.9) 0 60%, transparent 61%),
        radial-gradient(10px 10px at 82% 40%, rgba(255,190,220,.9) 0 60%, transparent 61%),
        radial-gradient(8px 8px at 60% 70%, rgba(255,170,210,.9) 0 60%, transparent 61%);
      filter: blur(0px);
      opacity:.7;
      mix-blend-mode:multiply;
    }

    /* â‘¢ ç¥ç¤¾æŸ„ï¼šã‚ãªãŸã®ç”»åƒã‚’èƒŒæ™¯ã«ï¼ˆæ ¼å­ã²ã—å½¢ã¯å®Œå…¨å‰Šé™¤ï¼‰ */
    body.theme-shrine{
      color: var(--ink);
      background:
        linear-gradient(180deg, rgba(255,255,255,0.72), rgba(255,255,255,0.84)),
      url("sakura-torii-bg.png.png");
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
    }

    /* â‘£ å¤œæ¡œï¼šãƒ©ã‚¤ãƒˆã‚¢ãƒƒãƒ—é¢¨ */
    body.theme-night{
      color:#e9eef6;
      background:
        radial-gradient(1000px 700px at 50% 110%, rgba(255,140,200,.35), transparent 60%),
        radial-gradient(900px 650px at 10% -10%, rgba(90,120,160,.35), transparent 60%),
        radial-gradient(800px 500px at 90% 110%, rgba(130,70,120,.25), transparent 60%),
        linear-gradient(180deg, #0e1522 0%, #121a2b 60%, #0b111b 100%);
      background-attachment: fixed;
    }
    body.theme-night::before{
      content:"";
      position:fixed; inset:-10vh -10vw;
      background:
        radial-gradient(120px 120px at 18% 28%, rgba(255,170,210,.25) 0 30%, transparent 31%),
        radial-gradient(140px 140px at 70% 35%, rgba(255,190,220,.22) 0 28%, transparent 29%),
        radial-gradient(110px 110px at 55% 75%, rgba(255,160,210,.20) 0 26%, transparent 27%);
      filter: blur(10px);
      opacity:.9;
      z-index:0; pointer-events:none;
    }

    /* ==========================
       èƒŒæ™¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆé³¥å±…/å·¦å³ã‚­ãƒ£ãƒ©ï¼‰
       ========================== */

    /* é³¥å±…ã‚’è–„ãèƒŒæ™¯ã«ï¼ˆç¥ç¤¾æŸ„ã®ã¿è¡¨ç¤ºï¼‰ */
    .torii-bg{
      position:fixed;
      bottom:-6vh;
      left:50%;
      transform:translateX(-50%);
      width:min(980px, 120vw);
      opacity:0;                 /* åˆæœŸã¯éè¡¨ç¤º */
      z-index:0;
      pointer-events:none;
      filter: saturate(1.1);
      transition: opacity 250ms ease;
    }
    body.theme-shrine .torii-bg{ opacity:.20; }

    /* å·¦å³ã‚­ãƒ£ãƒ©ï¼ˆç¥ç¤¾æŸ„ã®ã¨ãã ã‘è¡¨ç¤ºï¼‰ */
    .side{
      position:fixed;
      bottom:2vh;
      width:min(220px, 28vw);
      z-index:1;
      pointer-events:none;
      opacity:0;
      transform:translateY(10px);
      transition:opacity 250ms ease, transform 250ms ease;
      filter: drop-shadow(0 8px 16px rgba(0,0,0,.15));
    }
    .side.left{ left:2vw; }
    .side.right{ right:2vw; }
    body.theme-shrine .side{
      opacity:1;
      transform:translateY(0);
    }

    /* ==========================
       ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæœ¬ä½“
       ========================== */
    .stage{
      position:relative;
      width:100%;
      display:grid;
      place-items:center;
      z-index:2; /* èƒŒæ™¯ã‚ˆã‚Šå‰ */
    }

    .card{
      width:min(760px, 100%);
      background:rgba(255,255,255,0.95);
      border:2px solid var(--line);
      border-radius:20px;
      padding:22px 18px 16px;
      box-shadow:0 10px 35px rgba(31,42,55,0.08);
      text-align:center;
      position:relative;
      z-index:3;
    }
    body.theme-night .card{
      background:rgba(12,18,30,0.92);
      border-color:rgba(160,190,220,0.28);
      box-shadow:0 10px 40px rgba(0,0,0,0.35);
    }

    /* èƒŒæ™¯åˆ‡æ›¿UI */
    .theme-bar{
      display:flex; gap:8px; justify-content:center; flex-wrap:wrap;
      margin-bottom:10px;
      position:relative; z-index:4;
    }
    .theme-btn{
      border:1px solid #dbe6f2;
      background:#ffffff;
      padding:6px 10px;
      border-radius:999px;
      font-size:13px;
      font-weight:800;
      cursor:pointer;
      user-select:none;
    }
    body.theme-night .theme-btn{
      background: rgba(255,255,255,0.06);
      border-color: rgba(180,200,220,0.3);
      color:#e9eef6;
    }
    .theme-btn.active{
      outline:2px solid var(--accent);
      outline-offset:1px;
    }

    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding:6px 12px; border-radius:999px;
      background:#f1f6fb; font-weight:800; font-size:14px;
    }
    body.theme-night .badge{
      background: rgba(255,255,255,0.06);
      color:#e9eef6;
    }
    .badge .dot{
      width:8px;height:8px;border-radius:50%;
      background:var(--accent);display:inline-block;
    }

    h1{margin:12px 0 4px;font-size:24px;letter-spacing:.05em;}
    .sub{font-size:13px;opacity:.8;margin-bottom:12px;}

    .slot{
      margin:14px auto 8px;
      padding:18px 12px;
      border-radius:14px;
      border:2px dashed #dce7f2;
      background:#fbfdff;
      font-size:42px; font-weight:900; letter-spacing:.08em;
      min-height:92px; display:grid; place-items:center;
      user-select:none;
    }
    body.theme-night .slot{
      background: rgba(255,255,255,0.06);
      border-color: rgba(180,200,220,0.35);
      color:#fff;
    }

    .message{
      margin:8px auto 6px;
      font-size:16px; line-height:1.9;
      min-height:92px; padding:6px 12px;
      white-space:pre-line;
    }
    .rows{
      display:flex; flex-wrap:wrap; gap:8px; justify-content:center;
      margin:8px 0 10px; font-size:14px;
    }
    .pill{
      padding:6px 10px; border-radius:10px; background:#f1f6fb; font-weight:800;
      border:1px solid #e3edf7;
    }
    body.theme-night .pill{
      background: rgba(255,255,255,0.06);
      border-color: rgba(180,200,220,0.25);
      color:#e9eef6;
    }

    .btn{
      margin-top:8px; width:100%;
      border:none; border-radius:12px; padding:14px 10px;
      font-size:16px; font-weight:900; letter-spacing:.04em;
      cursor:pointer;
      background:linear-gradient(90deg, #eaf5ff, #ffffff);
      border:2px solid #e2edf7;
    }
    body.theme-night .btn{
      background: linear-gradient(90deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
      color:#fff;
      border-color: rgba(180,200,220,0.3);
    }
    .btn:active{transform:translateY(1px);}
    .hint{margin-top:8px;font-size:13px;opacity:.8;}
    .tiny{font-size:12px;opacity:.75;margin-top:6px;}
  </style>
</head>

<body class="theme-sakura">
  <!-- é³¥å±…ï¼ˆç¥ç¤¾æŸ„ã§è¡¨ç¤ºï¼‰ -->
  <img class="torii-bg" id="toriiBg" src="torii1_myoujin.png" alt="é³¥å±…èƒŒæ™¯">

  <!-- å·¦å³ã‚­ãƒ£ãƒ©ï¼ˆç¥ç¤¾æŸ„ã§è¡¨ç¤ºï¼‰ -->
  <img class="side left" id="kontou" src="kontou.png" alt="ç´ºç¯">
  <img class="side right" id="hyouga" src="hyouga.png" alt="æ°·ç‰™">

  <div class="stage">
    <div class="card" id="card">
      <div class="theme-bar">
        <button class="theme-btn active" data-theme="sakura">ğŸŒ¸ æ¡œ</button>
        <button class="theme-btn" data-theme="shrine">â›©ï¸ ç¥ç¤¾</button>
        <button class="theme-btn" data-theme="night">ğŸŒ™ å¤œæ¡œ</button>
      </div>

      <div class="badge"><span class="dot"></span>ç‹ç‹¼ç¥ç¤¾ å¾¡ç±¤</div>
      <h1>ç™½ç‹¼ãŠã¿ãã˜ãƒ¡ãƒ¼ã‚«ãƒ¼</h1>
      <div class="sub">ç”»é¢ã‚’ã‚¿ãƒƒãƒ—ã—ã¦æ­¢ã‚ã‚‹ã¨ã€ä»Šæ—¥ã®é‹å‹¢ãŒå‡ºã‚‹ã‚ˆğŸºâ›©ï¸</div>

      <div class="slot" id="slot">ã‚¿ãƒƒãƒ—ã§é–‹å§‹</div>
      <div class="message" id="message"></div>
      <div class="rows" id="rows"></div>

      <button class="btn" id="btn">ã‚¿ãƒƒãƒ—ã—ã¦å›ã™ / æ­¢ã‚ã‚‹</button>
      <div class="hint">â€» ã‚‚ã†ä¸€åº¦ã‚¿ãƒƒãƒ—ã§å¼•ãç›´ã—</div>
      <div class="tiny">Â© ç‹ç‹¼ç¥ç¤¾ / ç™½ç‹¼ã‚‹ã‹</div>
    </div>
  </div>

<script>
(() => {
  const omikuji = [
    {name:"å¤§ç¥å‰",msg:"ç‹ç‹¼ç¥ç¤¾ã®ç¥ã•ã¾ãŒç‰¹åˆ¥ã«å¾®ç¬‘ã‚“ã§ã‚‹ã‚ˆâ›©ï¸âœ¨\nä»Šæ—¥ã¯é¡˜ã„ã”ã¨ã€ã²ã¨ã¤å‹•ã‹ã—ã¦ã¿ã‚ˆï¼Ÿ",
     lucky:["æŒ‘æˆ¦â—","æœã®æ•£æ­©â—","äººã«å„ªã—ãâ—"], item:"ç™½ã„ãŠå®ˆã‚Š", color:"æ¾„ã‚“ã æ°´è‰²", food:"æ¸©ã‹ã„ãŠèŒ¶"},
    {name:"å¤§å‰",msg:"ã¨ã£ã¦ã‚‚è‰¯ã„æµã‚Œï¼\nã‚„ã‚ŠãŸã„ã“ã¨ã«ç´ ç›´ã«ãªã£ã¦OKã®æ—¥ã ã‚ˆğŸºğŸ’™",
     lucky:["è¡Œå‹•â—","å‘Šç™½â—","è²·ã„ç‰©â—"], item:"éˆ´ã®ã‚­ãƒ¼ãƒ›ãƒ«ãƒ€ãƒ¼", color:"ç™½", food:"ãŠã«ãã‚Š"},
    {name:"ä¸­å‰",msg:"ã„ã„å…†ã—ãŒæ¥ã¦ã‚‹æ„Ÿã˜ã€œã€‚\nå°ã•ãªå¹¸ã›ã«æ°—ã¥ãã¨é‹æ°—ãŒã•ã‚‰ã«ä¸ŠãŒã‚‹ã‚ˆã€‚",
     lucky:["æ•´ç†â—","é€£çµ¡â—","æ·±å‘¼å¸â—"], item:"å’ŒæŸ„ãƒãƒ¼ãƒˆ", color:"è–„æ¡ƒ", food:"å’Œè“å­"},
    {name:"å°å‰",msg:"ã‚†ã£ãã‚Šé€²ã‚ã°ã¡ã‚ƒã‚“ã¨è‰¯ããªã‚‹æ—¥ã€‚\nç„¦ã‚‰ãšãµã‚ã£ã¨ã„ã“ğŸº",
     lucky:["ä¼‘æ†©â—","ä¸å¯§â—","æ—©å¯â—"], item:"ã—ã£ã½å‹ãƒãƒ£ãƒ¼ãƒ ", color:"æ·¡ã„é‡‘", food:"ã¿ãæ±"},
    {name:"ç™½ç‹¼å‰",msg:"ç™½ç‹¼ã ã‘ãŒè¦‹ã¤ã‘ã‚‰ã‚Œã‚‹å¹¸ã›ãŒå¯„ã£ã¦ãã‚‹ç‰¹åˆ¥é‹ï¼\nã‚ãªãŸã®å„ªã—ã•ãŒé‹æ°—ã‚’é€£ã‚Œã¦ãã‚‹ã‚ˆâ›©ï¸ğŸº",
     lucky:["æ°—ã¥ãâ—","ç™’ã—â—","æ€ã„ã‚„ã‚Šâ—"], item:"ç™½ç‹¼ã®å¾¡æœ­", color:"éŠ€è‰²", food:"ã¯ã¡ã¿ã¤"},
    {name:"å¹³ç¦",msg:"ä»Šæ—¥ã¯ç©ã‚„ã‹ã«æ•´ã†æ—¥ã€‚\nç„¡ç†ã—ãªã„ã§ã€å‘¼å¸å¤šã‚ã§ã­ã€‚",
     lucky:["ã®ã‚“ã³ã‚Šâ—","ç¾çŠ¶ç¶­æŒâ—","ä½“ã‚±ã‚¢â—"], item:"ã‚ã£ãŸã‹ãƒ–ãƒ©ãƒ³ã‚±ãƒƒãƒˆ", color:"è–„ã„ç°é’", food:"ã‚¹ãƒ¼ãƒ—"},
    {name:"å¾®å‡¶",msg:"ã¡ã‚‡ã£ã¨æ³¨æ„ã®æ—¥ã ã‘ã©å¤§ä¸ˆå¤«ã€‚\næ…é‡ã«æ­©ã‘ã°å•é¡Œãªã—ï¼ã‚‹ã‹ãŒã¤ã„ã¦ã‚‹ã‚ˆğŸº",
     lucky:["å¿˜ã‚Œç‰©æ³¨æ„","å¤œã¯æ—©ã‚ã«â—","è½ã¡ç€ã„ã¦â—"], item:"å°ã•ãªãƒ©ã‚¤ãƒˆ", color:"æ·±ã„è—", food:"ãƒãƒŠãƒŠ"},
    {name:"ãŠã°ã‘å‡¶",msg:"ã“ã€ã“ã‚ãŒã‚‰ã›ã‚‹ã¤ã‚‚ã‚Šã˜ã‚ƒãªã„ã‚“ã ã‘ã©â€¦\næ²¹æ–­ã™ã‚‹ã¨ãƒ“ã‚¯ãƒƒï¼ãŒã‚ã‚‹ã‹ã‚‚ğŸºğŸ’¦\nå¤œã¯æ˜ã‚‹ãã—ã¦æ—©å¯ãŒå‰ï¼",
     lucky:["æ…é‡â—","å¤œé“æ³¨æ„","éŸ³ã«æ³¨æ„â€¦"], item:"æ¸…ã‚ã®å¡©", color:"é»’", food:"ãƒ›ãƒƒãƒˆãƒŸãƒ«ã‚¯"},
    {name:"ã‚‹ã‹ä¿è­·æ¡ˆä»¶",msg:"ä»Šæ—¥ã¯ç„¡èŒ¶ã—ãªã„ã§ã­â€¦ï¼\nã‚‹ã‹ãŒä¿è­·ã™ã‚‹ãƒ¬ãƒ™ãƒ«ã®æ—¥ğŸºğŸ’¦\næ·±å‘¼å¸ã—ã¦ã€ã‚„ã•ã—ãéã”ãï¼Ÿ",
     lucky:["ä¼‘ã‚€â—","é ¼ã‚‹â—","ã‚„ã‚ã‚‹å‹‡æ°—â—"], item:"ç‰¹å¤§ãŠå®ˆã‚Š", color:"èµ¤", food:"ç”˜ã„ã‚‚ã®"}
  ];

  const slot = document.getElementById("slot");
  const message = document.getElementById("message");
  const rows = document.getElementById("rows");
  const btn = document.getElementById("btn");
  const card = document.getElementById("card");

  let timer = null;
  let running = false;
  let currentIndex = 0;
  const randIndex = () => Math.floor(Math.random() * omikuji.length);

  function renderResult(i){
    const r = omikuji[i];
    slot.textContent = r.name;
    message.textContent = r.msg;
    rows.innerHTML = `
      <div class="pill">ãƒ©ãƒƒã‚­ãƒ¼: ${r.lucky.join(" / ")}</div>
      <div class="pill">ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ : ${r.item}</div>
      <div class="pill">ãƒ©ãƒƒã‚­ãƒ¼ã‚«ãƒ©ãƒ¼: ${r.color}</div>
      <div class="pill">ãƒ©ãƒƒã‚­ãƒ¼ãƒ•ãƒ¼ãƒ‰: ${r.food}</div>
    `;
  }

  function start(){
    running = true;
    message.textContent = "";
    rows.innerHTML = "";
    btn.textContent = "ã‚¿ãƒƒãƒ—ã—ã¦æ­¢ã‚ã‚‹";
    timer = setInterval(()=>{
      currentIndex = randIndex();
      slot.textContent = omikuji[currentIndex].name;
    }, 65);
  }

  function stop(){
    running = false;
    clearInterval(timer);
    timer = null;
    btn.textContent = "ã‚‚ã†ä¸€åº¦å¼•ã";
    renderResult(currentIndex);
  }

  function toggle(){
    if(!running && !timer){
      start();
    }else if(running){
      stop();
    }else{
      slot.textContent = "ã‚¿ãƒƒãƒ—ã§é–‹å§‹";
      message.textContent = "";
      rows.innerHTML = "";
      start();
    }
  }

  function handleTap(e){
    if (e.target === btn) return;
    toggle();
  }

  /* ===== ã‚¹ãƒãƒ›/PCã®ã‚¿ãƒƒãƒå¼·åŒ– ===== */
  btn.addEventListener("click", toggle);
  card.addEventListener("click", handleTap);

  btn.addEventListener("pointerdown", (e)=>{ e.preventDefault(); toggle(); });
  card.addEventListener("pointerdown", (e)=>{ e.preventDefault(); handleTap(e); });

  btn.addEventListener("touchstart", (e)=>{ e.preventDefault(); toggle(); }, {passive:false});
  card.addEventListener("touchstart", (e)=>{ e.preventDefault(); handleTap(e); }, {passive:false});

  /* ===== èƒŒæ™¯åˆ‡æ›¿ ===== */
  const themeBtns = document.querySelectorAll(".theme-btn");
  themeBtns.forEach(b=>{
    b.addEventListener("click", (e)=>{
      const t = b.dataset.theme;
      document.body.classList.remove("theme-sakura","theme-shrine","theme-night");
      document.body.classList.add(`theme-${t}`);
      themeBtns.forEach(x=>x.classList.remove("active"));
      b.classList.add("active");
      e.stopPropagation();
    });
    b.addEventListener("pointerdown",(e)=>e.stopPropagation());
    b.addEventListener("touchstart",(e)=>e.stopPropagation(),{passive:false});
  });
})();
</script>
</body>
</html>
